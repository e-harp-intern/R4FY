# 検証環境手順
## 手順
開発環境と同じ手順で準備後...

### メール設定
`api/config/mail.yml` を以下のように書き換え
```yml
method: :smtp
settings:
  :domain: "harp-intern.local"
  :address: "192.168.0.50"
  :port: 25
  :tls: false
  :ssl: false
  :authentication: nil
  :enable_starttls_auto: true
  :openssl_verify_mode: 'none'
default_options:
  :from: "test@harp-intern.local"
```

### CROS設定
`api/config/initialize/cors.rb` を環境に合わせ書き換え

### 起動
```shell
docker-compose up -d api
docker-compose up -d web
```

### その他
<details>
<summary>検証環境手順（旧）</summary>

---

### ビルド
```shell
docker-compose run web npm run build
```

### CROS設定変更
- `api/config/initializers/cors.rb`
  - `origins` を環境に合わせて書き換える
- `/api/config/mail.yml`
  - 環境に合わせてメールの設定

### DB
- `rails s -e production` で起動するように変更しているなら以下の手順を実行
```
docker-compose run api rake db:create RAILS_ENV=production #本番環境（Production）でrakeコマンド（DB作成）
docker-compose run api rake db:migrate RAILS_ENV=production #本番環境（Production）でrakeコマンド（マイグレーション実行）
```

### 起動
```shell
docker-compose -f docker-compose-prod.yaml up -d
```

- アクセス: http://localhost:9000/

---

</details>
